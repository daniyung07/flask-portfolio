{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
    <h1>Welcome to My Portfolio!</h1>
    <p>I am learning Flask and building my first web application.</p>

    <form action="{{url_for('main.index')}}" method="get">
        <input type="search" name="search" id="search" placeholder="Search projects...">

        <select name="category" id="category">
            <option value="">All Categories</option>
            <option value="Web App">Web App</option>
            <option value="Data Science">Data Science</option>
            <option value="Tool">Tool</option>
        </select>

        <button type="submit">Filter</button>
    </form>

    <hr>

    <h2>My Projects</h2>
    <ul>
    {% for project in portfolio_projects %}
        <li class="project-item">
            <h3>{{ project.title }}</h3>
            <p>{{ project.description }}</p>

            <a href="{{ project.link }}">View Project</a>

            {% if current_user.is_authenticated %}
                | <a href="{{ url_for('main.admin_edit_project', id=project.id) }}">Edit</a>
                | <form action="{{ url_for('main.admin_delete_project', id=project.id) }}" method="post" style="display: inline;">
                    </form>
            {% endif %}

            {% if current_user.is_authenticated %}
                | <form action="{{ url_for('main.admin_delete_project', id=project.id) }}" method="post" style="display: inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete {{ project.title }}?')"
                            class="btn btn-danger btn-sm">Delete</button>
                </form>
            {% endif %}
        </li>
    {% endfor %}
    </ul>
{% endblock %}